var asElevatorInterface=function(f,e,d,a){var c=riot.observable(f);c.destinationQueue=[];var b=function(k,j,i,h,g){try{c.trigger(k,j,i,h,g)}catch(l){a(l)}};c.checkDestinationQueue=function(){if(!e.isBusy()){if(c.destinationQueue.length){e.goToFloor(_.first(c.destinationQueue))}else{b("idle")}}};c.goToFloor=function(h,g){h=limitNumber(Number(h),0,d-1);if(c.destinationQueue.length){var i=g?_.first(c.destinationQueue):_.last(c.destinationQueue);if(epsilonEquals(h,i)){return}}c.destinationQueue[(g?"unshift":"push")](h);c.checkDestinationQueue()};c.stop=function(){c.destinationQueue=[];if(!e.isBusy()){e.goToFloor(e.getExactFutureFloorIfStopped())}};c.getFirstPressedFloor=function(){return e.getFirstPressedFloor()};c.getPressedFloors=function(){return e.getPressedFloors()};c.currentFloor=function(){return e.currentFloor};c.maxPassengerCount=function(){return e.maxUsers};c.loadFactor=function(){return e.getLoadFactor()};c.goingUpIndicator=createBoolPassthroughFunction(c,e,"goingUpIndicator");c.goingDownIndicator=createBoolPassthroughFunction(c,e,"goingDownIndicator");e.on("stopped",function(g){if(c.destinationQueue.length&&epsilonEquals(_.first(c.destinationQueue),g)){c.destinationQueue=_.rest(c.destinationQueue);if(e.isOnAFloor()){e.wait(1,function(){c.checkDestinationQueue()})}else{c.checkDestinationQueue()}}});e.on("passing_floor",function(g,h){b("passing_floor",g,h)});e.on("stopped_at_floor",function(g){b("stopped_at_floor",g)});e.on("floor_button_pressed",function(g){b("floor_button_pressed",g)});return c};